<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>System ZarzƒÖdzania D≈Çugami</title>

  <link rel="stylesheet" href="style.css">

  <!-- EmailJS SDK -->
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script>
    (function(){
      emailjs.init("Qm0kIiI5sPeh_kgn9"); // Tw√≥j Public Key
    })();
  </script>

  <!-- Firebase SDK -->
  <script type="module" src="firebase-init.js"></script>
</head>

<body>
  <div class="container">
    <h1>System ZarzƒÖdzania D≈Çugami</h1>

    <!-- Lista os√≥b -->
    <section class="section">
      <h2>Osoby</h2>
      <ul id="peopleList"></ul>
    </section>

    <!-- Tworzenie nowego d≈Çugu -->
    <section class="section">
      <h2>Utw√≥rz nowy d≈Çug</h2>
      <button id="createDebtBtn">Utw√≥rz d≈Çug</button>

      <form id="debtForm" class="hidden">
        <label for="debtTitle">Tytu≈Ç d≈Çugu</label>
        <input id="debtTitle" type="text" placeholder="Np. Zakupy spo≈ºywcze" required>

        <label for="debtorSelect">Wybierz d≈Çu≈ºnika(-√≥w)</label>
        <select id="debtorSelect" multiple required></select>
        <p class="small-text">Przytrzymaj Ctrl/‚åò, aby zaznaczyƒá wielu.</p>

        <h3>Produkty</h3>
        <div id="productsContainer"></div>
        <button type="button" id="addProductBtn">Dodaj produkt</button>

        <label for="dueDate">Termin sp≈Çaty</label>
        <input id="dueDate" type="date" required>

        <div class="form-actions">
          <button type="submit" id="saveDebtBtn">Zapisz d≈Çug</button>
          <button type="button" id="cancelDebtBtn">Anuluj</button>
        </div>
      </form>
    </section>

    <!-- Aktywne d≈Çugi -->
    <section class="section">
      <h2>Aktywne d≈Çugi</h2>
      <div id="activeDebtsList"></div>
    </section>

    <!-- Archiwum d≈Çug√≥w -->
    <section class="section">
      <h2>Archiwum d≈Çug√≥w</h2>
      <div id="archivedDebtsList"></div>
    </section>
  </div>

  <!-- Modal ‚Äì paragon d≈Çugu -->
  <dialog id="receiptModal">
    <pre id="receiptContent"></pre>
    <div class="modal-actions">
      <button id="printReceiptBtn">Drukuj</button>
      <button id="closeModalBtn">Zamknij</button>
    </div>
  </dialog>

  <!-- Modal ‚Äì wyb√≥r metody p≈Çatno≈õci -->
  <dialog id="paymentModal">
    <h3>Wybierz metodƒô p≈Çatno≈õci</h3>
    <div class="payment-options">
      <button id="paymentCash" class="payment-btn">üíµ Got√≥wka</button>
      <button id="paymentTransfer" class="payment-btn">üí≥ Przelew</button>
    </div>
    <button id="cancelPaymentBtn" class="cancel-btn">Anuluj</button>
  </dialog>

  <!-- Modal ‚Äì potwierdzenie op≈Çaty -->
  <dialog id="paymentConfirmModal">
    <pre id="paymentConfirmContent"></pre>
    <div class="modal-actions">
      <button id="printConfirmBtn">Drukuj potwierdzenie</button>
      <button id="closeConfirmBtn">Zamknij</button>
    </div>
  </dialog>

  <script type="module" src="script.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>System Zarządzania Długami</title>

  <link rel="stylesheet" href="style.css" />

  <!-- Firebase v9 CDN -->
  <script type="module" src="firebase-init.js"></script>
</head>

<body>
  <div class="container">
    <h1>System Zarządzania Długami</h1>

    <!-- ==== LISTA OSÓB ==== -->
    <section class="section">
      <h2>Osoby</h2>
      <ul id="peopleList"></ul>
    </section>

    <!-- ==== NOWY DŁUG ==== -->
    <section class="section">
      <h2>Utwórz nowy dług</h2>
      <button id="createDebtBtn">Utwórz dług</button>

      <form id="debtForm" class="hidden">
        <label for="debtTitle">Tytuł długu</label>
        <input id="debtTitle" type="text" placeholder="Np. Zakupy spożywcze" required />

        <label for="debtorSelect">Wybierz dłużnika(-ów)</label>
        <select id="debtorSelect" multiple required></select>
        <p class="small-text">Przytrzymaj Ctrl/⌘, aby zaznaczyć wielu.</p>

        <h3>Produkty</h3>
        <div id="productsContainer"></div>
        <button type="button" id="addProductBtn">Dodaj produkt</button>

        <label for="dueDate">Termin spłaty</label>
        <input id="dueDate" type="date" required />

        <div class="form-actions">
          <button type="submit" id="saveDebtBtn">Zapisz dług</button>
          <button type="button" id="cancelDebtBtn">Anuluj</button>
        </div>
      </form>
    </section>

    <!-- ==== AKTYWNE ==== -->
    <section class="section">
      <h2>Aktywne długi</h2>
      <div id="activeDebtsList"></div>
    </section>

    <!-- ==== ARCHIWUM ==== -->
    <section class="section">
      <h2>Archiwum długów</h2>
      <div id="archivedDebtsList"></div>
    </section>
  </div>

  <!-- ==== MODALE ==== -->
  <!-- Modal paragonu długu -->
  <dialog id="receiptModal">
    <pre id="receiptContent"></pre>
    <div class="modal-actions">
      <button id="printReceiptBtn">Drukuj</button>
      <button id="closeModalBtn">Zamknij</button>
    </div>
  </dialog>

  <!-- Modal wyboru metody płatności -->
  <dialog id="paymentMethodModal">
    <h3>Wybierz metodę płatności</h3>
    <div class="payment-method-option">
      <input type="radio" id="paymentCash" name="paymentMethod" value="gotówka" required checked>
      <label for="paymentCash">Gotówka</label>
    </div>
    <div class="payment-method-option">
      <input type="radio" id="paymentTransfer" name="paymentMethod" value="przelew" required>
      <label for="paymentTransfer">Przelew</label>
    </div>
    <div class="modal-actions">
      <button id="confirmPaymentMethodBtn">Zatwierdź</button>
      <button id="cancelPaymentMethodBtn">Anuluj</button>
    </div>
  </dialog>

  <!-- Modal potwierdzenia opłaty (do druku) -->
  <dialog id="paymentConfirmationModal">
    <pre id="paymentConfirmationContent"></pre>
  </dialog>

  <!-- Główny skrypt -->
  <script type="module" src="script.js"></script>
</body>
</html>